<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <title>Mes Travaux</title>
    <link rel="stylesheet" type="text/css" href="../../style.css">
	
  </head>

  <body>
    <header>
      <h1>Mes Travaux !</h1>
	  <!-- Un jour peut être... -->
    </header>

    <nav>
      <ul>
		<li><a href="../mes_travaux.html" class="lien_titre">Mes travaux</a></li>
        <li><a href="../../a_propos/a_propos.html" class="lien_titre"> À propos </a></li>
        <li><a href="../../index.html" class="lien_titre"> Accueil </a></li>
      </ul>

     </nav>

     <main>
      <article>
		<h2>TP2 - Carrés</h2>
        <p> "Produisez une page html présentant 3 carrés se déplaçant du bord gauche du canvas vers le bord droit"<p>

		<h2><canvas id="ctnCanvas" width="600" height="600"
			style="border:3px solid #c3c3c3;">
		</canvas></h2>		
	  </article>

      <aside>
        <h2>Travaux réalisés</h2>
        <ul>
			<li><a href="#"></a>TP JavaScript</li>
				<ul>
					<li><a href="./tp_is_1.html">TP1 - Archive audio</a></li>
					<li><a href="./tp_js_2_exo1.html">TP2 - Callbacks</a></li>
					<li><a href="./tp_js_2_exo234.html"></a>TP2 - Carrés</li>
					<li><a href="./tp_js_3_exo1.html">TP3 - Des Cercles</a></li>
				</ul>
        </ul>
      </aside>

    </main>

    <footer>
      <p>©Copyright – tous droits réservés</p>
    </footer>

		<script>
			const ctnCanvas=document.getElementById('ctnCanvas');
			const ctx = ctnCanvas.getContext("2d");

			const carreWidth= 50;
			const carreHeight= 50;	
			const carreSpeed=10;
			let clock=0;
			
			class Carre {
				constructor(context,width,height,x,y,speed, delay, color){
					this.context=context;
					this.width=width;
					this.height=height;
					this.x=x;
					this.y=y;
					this.speed=speed;
					this.color=color;
					this.delay=delay;
				}
				clear(){
					this.context.fillStyle='#D4D4D4';
					this.context.fillRect(this.x, this.y, this.width, this.height);
				}
				
				move(){
					if(this.x+this.width>=ctnCanvas.width){
						this.x=ctnCanvas.width-this.width;
						ctx.fillStyle = this.color;
						ctx.fillRect(this.x,this.y,this.width,this.height);
					}
					else {
						if(this.delay<clock){
							this.x += this.speed;
						}
						ctx.fillStyle = this.color;
						ctx.fillRect(this.x,this.y,this.width,this.height);
					}
				}
			}
			
			ctx.fillStyle = "#D4D4D4";
			ctx.fillRect(0,0,ctnCanvas.width,ctnCanvas.height);
			
			const objectsInGame = new Array();

			const carre1 = new Carre(ctx,carreWidth, carreHeight,0,0,10,250,"#00003d");
			const carre2 = new Carre(ctx,carreWidth, carreHeight,0,carreHeight,20,3000,"#8B0000");
			const carre3 = new Carre(ctx,carreWidth, carreHeight,0,2*carreHeight,40,4500,"#FFFFFF");


			objectsInGame.push(carre1);
			objectsInGame.push(carre2);
			objectsInGame.push(carre3);
			
			
			this.interval = setInterval(gameLoop,100);

			function clearGame(){
				objectsInGame.forEach(element => element.clear());
			}


			function updateGame(){
				objectsInGame.forEach(element => element.move());
			}
			

			function gameLoop(){
				clock+=100;
				clearGame();
				updateGame();
			}

	</script>
	
  </body>
</html>